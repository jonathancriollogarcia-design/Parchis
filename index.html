<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Champions - Juego Multijugador</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
    --primary-color: #6c5ce7;
    --secondary-color: #fd79a8;
    --accent-color: #fdcb6e;
    --success-color: #55efc4;
    --danger-color: #ff7675;
    --dark-color: #2d3436;
    --light-color: #dfe6e9;
    --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --card-bg: rgba(255, 255, 255, 0.9);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Fredoka', sans-serif;
    background: var(--bg-gradient);
    color: var(--dark-color);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
}

/* Animated background elements */
.bg-animation {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: -1;
    overflow: hidden;
}

.bg-animation span {
    position: absolute;
    display: block;
    width: 20px;
    height: 20px;
    background: rgba(255, 255, 255, 0.2);
    animation: move 25s linear infinite;
    bottom: -150px;
}

.bg-animation span:nth-child(1) {
    left: 25%;
    width: 80px;
    height: 80px;
    animation-delay: 0s;
}

.bg-animation span:nth-child(2) {
    left: 10%;
    width: 20px;
    height: 20px;
    animation-delay: 2s;
    animation-duration: 12s;
}

.bg-animation span:nth-child(3) {
    left: 70%;
    width: 20px;
    height: 20px;
    animation-delay: 4s;
}

.bg-animation span:nth-child(4) {
    left: 40%;
    width: 60px;
    height: 60px;
    animation-delay: 0s;
    animation-duration: 18s;
}

.bg-animation span:nth-child(5) {
    left: 65%;
    width: 20px;
    height: 20px;
    animation-delay: 0s;
}

.bg-animation span:nth-child(6) {
    left: 75%;
    width: 110px;
    height: 110px;
    animation-delay: 3s;
}

.bg-animation span:nth-child(7) {
    left: 35%;
    width: 150px;
    height: 150px;
    animation-delay: 7s;
}

.bg-animation span:nth-child(8) {
    left: 50%;
    width: 25px;
    height: 25px;
    animation-delay: 15s;
    animation-duration: 45s;
}

.bg-animation span:nth-child(9) {
    left: 20%;
    width: 15px;
    height: 15px;
    animation-delay: 2s;
    animation-duration: 35s;
}

.bg-animation span:nth-child(10) {
    left: 85%;
    width: 150px;
    height: 150px;
    animation-delay: 0s;
    animation-duration: 11s;
}

@keyframes move {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
        border-radius: 0;
    }
    100% {
        transform: translateY(-1000px) rotate(720deg);
        opacity: 0;
        border-radius: 50%;
    }
}

header {
    background: rgba(255, 255, 255, 0.25);
    backdrop-filter: blur(10px);
    padding: 20px;
    text-align: center;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
    border-bottom: 1px solid rgba(255, 255, 255, 0.18);
    position: relative;
    overflow: hidden;
}

header::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    animation: shine 3s infinite;
}

@keyframes shine {
    0% { left: -100%; }
    100% { left: 100%; }
}

h1 {
    font-size: 2.5rem;
    margin: 0;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    font-weight: 700;
    letter-spacing: 1px;
}

header p {
    font-size: 1.2rem;
    color: var(--dark-color);
    margin-top: 10px;
    font-weight: 500;
}

.admin-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    font-family: 'Fredoka', sans-serif;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.admin-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.sound-toggle {
    position: absolute;
    top: 20px;
    left: 20px;
    background: linear-gradient(90deg, var(--accent-color), #f39c12);
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    font-family: 'Fredoka', sans-serif;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.sound-toggle:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.sound-toggle.muted {
    background: linear-gradient(90deg, var(--light-color), var(--dark-color));
}

.container {
    display: flex;
    max-width: 1200px;
    margin: 30px auto;
    padding: 15px;
    gap: 30px;
}

.left-panel, .right-panel {
    background: var(--card-bg);
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.18);
    padding: 25px;
    transition: transform 0.3s ease;
}

.left-panel {
    flex: 2;
    display: flex;
    flex-direction: column;
}

.right-panel {
    flex: 1;
}

.left-panel:hover, .right-panel:hover {
    transform: translateY(-5px);
}

#controls {
    display: flex;
    margin-bottom: 20px;
    gap: 10px;
}

#new-player {
    flex: 1;
    padding: 12px 15px;
    border: 2px solid var(--primary-color);
    border-radius: 30px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.7);
}

#new-player:focus {
    outline: none;
    border-color: var(--secondary-color);
    box-shadow: 0 0 0 3px rgba(253, 121, 168, 0.2);
}

button {
    padding: 12px 20px;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    font-family: 'Fredoka', sans-serif;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

button:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

button:active {
    transform: translateY(1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

#add-player-btn {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    color: white;
}

/* Countdown Styles */
#current-player {
    font-size: 2rem;
    font-weight: 600;
    margin-bottom: 20px;
    padding: 20px;
    background: linear-gradient(90deg, var(--accent-color), var(--success-color));
    border-radius: 15px;
    color: white;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: playerTurnPulse 2s ease-in-out;
}

@keyframes playerTurnPulse {
    0% {
        transform: scale(0.8);
        opacity: 0;
    }
    50% {
        transform: scale(1.1);
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

#countdown-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 300px;
    margin-bottom: 20px;
}

.countdown-number {
    font-size: 8rem;
    font-weight: 700;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 0 30px rgba(108, 92, 231, 0.5);
    animation: countdownPulse 1s ease-in-out;
    margin-bottom: 20px;
}

@keyframes countdownPulse {
    0% {
        transform: scale(0.5);
        opacity: 0;
    }
    50% {
        transform: scale(1.3);
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.countdown-text {
    font-size: 1.5rem;
    color: var(--primary-color);
    font-weight: 600;
    animation: fadeIn 0.5s ease-in-out;
}

.countdown-progress {
    width: 100%;
    height: 8px;
    background: rgba(108, 92, 231, 0.2);
    border-radius: 4px;
    overflow: hidden;
    margin-top: 20px;
}

.countdown-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    border-radius: 4px;
    animation: progressShrink 2s linear;
}

@keyframes progressShrink {
    0% {
        width: 100%;
    }
    100% {
        width: 0%;
    }
}

#question-text {
    font-size: 1.3rem;
    margin-bottom: 25px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.7);
    border-radius: 15px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-left: 5px solid var(--primary-color);
    animation: fadeIn 0.5s ease-in-out;
}

#options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 20px;
}

.option {
    padding: 15px;
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    color: white;
    border-radius: 15px;
    font-size: 1rem;
    font-weight: 500;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    position: relative;
    overflow: hidden;
}

.option::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s;
}

.option:hover::before {
    left: 100%;
}

.option:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
}

.option.correct {
    background: linear-gradient(135deg, var(--success-color), #00b894);
    animation: pulse 0.5s;
}

.option.incorrect {
    background: linear-gradient(135deg, var(--danger-color), #d63031);
    animation: shake 0.5s;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

#result {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 20px;
    padding: 15px;
    border-radius: 15px;
    text-align: center;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
}

#result.correct {
    background: linear-gradient(135deg, var(--success-color), #00b894);
    color: white;
    animation: fadeIn 0.5s ease-in-out;
}

#result.incorrect {
    background: linear-gradient(135deg, var(--danger-color), #d63031);
    color: white;
    animation: fadeIn 0.5s ease-in-out;
}

.right-panel h3 {
    font-size: 1.5rem;
    margin-bottom: 20px;
    color: var(--primary-color);
    text-align: center;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--light-color);
}

#players-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

#players-table th, #players-table td {
    padding: 12px;
    text-align: center;
    border-bottom: 1px solid var(--light-color);
}

#players-table th {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    color: white;
    font-weight: 600;
}

#players-table tr {
    transition: all 0.3s ease;
}

#players-table tr:hover {
    background: rgba(108, 92, 231, 0.1);
}

.life {
    font-size: 1.5rem;
    transition: all 0.3s ease;
}

.life.lost {
    color: var(--danger-color);
    animation: heartbeat 0.5s;
}

@keyframes heartbeat {
    0% { transform: scale(1); }
    25% { transform: scale(1.3); }
    50% { transform: scale(1); }
    75% { transform: scale(1.3); }
    100% { transform: scale(1); }
}

.remove-btn {
    background: var(--danger-color);
    color: white;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 0.9rem;
}

/* Elimination Animation */
#elimination-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 5000;
    overflow: hidden;
}

.elimination-content {
    text-align: center;
    animation: eliminationZoom 2s ease-out;
    position: relative;
    z-index: 10;
}

@keyframes eliminationZoom {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.2);
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.elimination-photo {
    width: 400px;
    height: 400px;
    border-radius: 50%;
    border: 8px solid var(--danger-color);
    box-shadow: 0 0 50px rgba(255, 118, 117, 0.8);
    object-fit: cover;
    margin-bottom: 30px;
    animation: photoGlow 2s infinite alternate;
}

@keyframes photoGlow {
    0% {
        box-shadow: 0 0 50px rgba(255, 118, 117, 0.8);
    }
    100% {
        box-shadow: 0 0 80px rgba(255, 118, 117, 1);
    }
}

.elimination-name {
    font-size: 4rem;
    font-weight: 700;
    color: white;
    text-shadow: 0 0 20px rgba(255, 118, 117, 0.8);
    margin-bottom: 20px;
    animation: nameFlash 1s infinite alternate;
}

@keyframes nameFlash {
    0% {
        opacity: 0.8;
        transform: scale(1);
    }
    100% {
        opacity: 1;
        transform: scale(1.05);
    }
}

.elimination-message {
    font-size: 2.5rem;
    font-weight: 600;
    color: var(--danger-color);
    text-shadow: 0 0 15px rgba(255, 118, 117, 0.6);
    margin-bottom: 30px;
}

.elimination-stats {
    font-size: 1.5rem;
    color: white;
    margin-bottom: 40px;
}

.continue-btn {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    color: white;
    padding: 20px 40px;
    font-size: 1.5rem;
    border-radius: 50px;
    animation: continuePulse 1.5s infinite;
}

@keyframes continuePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.elimination-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
}

.particle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: var(--danger-color);
    border-radius: 50%;
    animation: particleFall 3s linear infinite;
}

@keyframes particleFall {
    0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

/* Winner Animation */
#winner-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 6000;
    overflow: hidden;
}

.winner-content {
    text-align: center;
    animation: winnerZoom 2s ease-out;
    position: relative;
    z-index: 10;
}

@keyframes winnerZoom {
    0% {
        transform: scale(0) rotate(0deg);
        opacity: 0;
    }
    50% {
        transform: scale(1.2) rotate(180deg);
        opacity: 1;
    }
    100% {
        transform: scale(1) rotate(360deg);
        opacity: 1;
    }
}

.winner-photo {
    width: 400px;
    height: 400px;
    border-radius: 50%;
    border: 8px solid var(--accent-color);
    box-shadow: 0 0 50px rgba(253, 203, 110, 0.8);
    object-fit: cover;
    margin-bottom: 30px;
    animation: winnerPhotoGlow 2s infinite alternate;
}

@keyframes winnerPhotoGlow {
    0% {
        box-shadow: 0 0 50px rgba(253, 203, 110, 0.8);
        transform: scale(1);
    }
    100% {
        box-shadow: 0 0 80px rgba(253, 203, 110, 1);
        transform: scale(1.05);
    }
}

.winner-name {
    font-size: 4rem;
    font-weight: 700;
    color: var(--accent-color);
    text-shadow: 0 0 20px rgba(253, 203, 110, 0.8);
    margin-bottom: 20px;
    animation: winnerNameFlash 1s infinite alternate;
}

@keyframes winnerNameFlash {
    0% {
        opacity: 0.8;
        transform: scale(1);
    }
    100% {
        opacity: 1;
        transform: scale(1.05);
    }
}

.winner-message {
    font-size: 3rem;
    font-weight: 600;
    color: white;
    text-shadow: 0 0 15px rgba(253, 203, 110, 0.6);
    margin-bottom: 30px;
    animation: messageGlow 1.5s infinite alternate;
}

@keyframes messageGlow {
    0% {
        transform: scale(1);
    }
    100% {
        transform: scale(1.05);
    }
}

.winner-stats {
    font-size: 1.5rem;
    color: white;
    margin-bottom: 40px;
}

.play-again-btn {
    background: linear-gradient(90deg, var(--success-color), #00b894);
    color: white;
    padding: 20px 40px;
    font-size: 1.5rem;
    border-radius: 50px;
    animation: playAgainPulse 1.5s infinite;
}

@keyframes playAgainPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.winner-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
}

.winner-particle {
    position: absolute;
    width: 15px;
    height: 15px;
    border-radius: 50%;
    animation: winnerParticleFall 3s linear infinite;
}

@keyframes winnerParticleFall {
    0% {
        transform: translateY(-100vh) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

.confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    background: var(--accent-color);
    animation: confetti-fall 3s linear infinite;
}

@keyframes confetti-fall {
    0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.fade {
    animation: fadeIn 0.5s ease-in-out;
}

/* Sound Indicator */
.sound-indicator {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
    display: none;
    align-items: center;
    gap: 10px;
    z-index: 10000;
    animation: soundSlideIn 0.3s ease-out;
}

@keyframes soundSlideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

.sound-wave {
    width: 3px;
    height: 20px;
    background: var(--accent-color);
    border-radius: 3px;
    animation: soundWave 0.5s infinite alternate;
}

.sound-wave:nth-child(2) {
    animation-delay: 0.1s;
}

.sound-wave:nth-child(3) {
    animation-delay: 0.2s;
}

.sound-wave:nth-child(4) {
    animation-delay: 0.3s;
}

@keyframes soundWave {
    0% { height: 10px; }
    100% { height: 20px; }
}

/* Login Modal */
#login-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 2000;
}

#login-modal {
    background: white;
    border-radius: 20px;
    padding: 40px;
    max-width: 400px;
    width: 90%;
    animation: bounceIn 0.5s;
}

#login-modal h2 {
    font-size: 2rem;
    margin-bottom: 30px;
    text-align: center;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.login-input {
    width: 100%;
    padding: 15px;
    margin-bottom: 20px;
    border: 2px solid var(--primary-color);
    border-radius: 30px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.7);
}

.login-input:focus {
    outline: none;
    border-color: var(--secondary-color);
    box-shadow: 0 0 0 3px rgba(253, 121, 168, 0.2);
}

#login-btn {
    width: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    color: white;
    padding: 15px;
    font-size: 1.1rem;
    margin-bottom: 15px;
}

#cancel-login-btn {
    width: 100%;
    background: var(--light-color);
    color: var(--dark-color);
    padding: 15px;
    font-size: 1.1rem;
}

/* Admin Panel */
#admin-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: none;
    z-index: 3000;
    overflow-y: auto;
}

#admin-panel {
    background: white;
    border-radius: 20px;
    padding: 40px;
    max-width: 900px;
    margin: 50px auto;
    animation: bounceIn 0.5s;
}

#admin-panel h2 {
    font-size: 2.5rem;
    margin-bottom: 30px;
    text-align: center;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.admin-tabs {
    display: flex;
    margin-bottom: 30px;
    border-bottom: 2px solid var(--light-color);
    flex-wrap: wrap;
}

.tab-btn {
    flex: 1;
    min-width: 150px;
    padding: 15px;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    font-weight: 600;
    color: var(--dark-color);
    cursor: pointer;
    transition: all 0.3s ease;
}

.tab-btn.active {
    border-bottom-color: var(--primary-color);
    color: var(--primary-color);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
    animation: fadeIn 0.5s ease-in-out;
}

.question-form {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.form-input {
    padding: 15px;
    border: 2px solid var(--primary-color);
    border-radius: 15px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.form-input:focus {
    outline: none;
    border-color: var(--secondary-color);
    box-shadow: 0 0 0 3px rgba(253, 121, 168, 0.2);
}

.options-input {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
}

.correct-select {
    padding: 15px;
    border: 2px solid var(--primary-color);
    border-radius: 15px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    background: white;
}

#save-question-btn {
    background: linear-gradient(90deg, var(--success-color), #00b894);
    color: white;
    padding: 15px;
    font-size: 1.1rem;
}

#ai-generate-btn {
    background: linear-gradient(90deg, #00b894, #55efc4);
    color: white;
    padding: 15px;
    font-size: 1.1rem;
    margin-bottom: 20px;
    position: relative;
    overflow: hidden;
}

#ai-generate-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: ai-shine 2s infinite;
}

@keyframes ai-shine {
    0% { left: -100%; }
    100% { left: 100%; }
}

.ai-generating {
    animation: pulse 1s infinite;
}

.questions-list {
    max-height: 400px;
    overflow-y: auto;
    border: 2px solid var(--light-color);
    border-radius: 15px;
    padding: 20px;
}

.question-item {
    background: rgba(108, 92, 231, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 15px;
    position: relative;
}

.question-item h4 {
    color: var(--primary-color);
    margin-bottom: 10px;
    font-size: 1.2rem;
}

.question-item p {
    margin: 5px 0;
    padding-left: 20px;
    position: relative;
}

.question-item p.correct::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: var(--success-color);
    font-weight: bold;
}

.delete-question-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: var(--danger-color);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 0.9rem;
}

#logout-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: var(--danger-color);
    color: white;
    padding: 10px 20px;
    border-radius: 30px;
}

/* Player Photos Section */
.photos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.photo-card {
    background: rgba(108, 92, 231, 0.1);
    border-radius: 15px;
    padding: 15px;
    text-align: center;
    transition: all 0.3s ease;
}

.photo-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(108, 92, 231, 0.2);
}

.photo-preview {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin-bottom: 10px;
    border: 3px solid var(--primary-color);
}

.player-name-input {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 2px solid var(--primary-color);
    border-radius: 10px;
    font-family: 'Fredoka', sans-serif;
}

.photo-upload-btn {
    width: 100%;
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    color: white;
    padding: 10px;
    font-size: 0.9rem;
    margin-bottom: 10px;
}

.delete-photo-btn {
    width: 100%;
    background: var(--danger-color);
    color: white;
    padding: 8px;
    font-size: 0.8rem;
    border-radius: 10px;
}

.add-photo-card {
    background: rgba(108, 92, 231, 0.05);
    border: 2px dashed var(--primary-color);
    border-radius: 15px;
    padding: 30px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    min-height: 250px;
}

.add-photo-card:hover {
    background: rgba(108, 92, 231, 0.1);
    transform: translateY(-5px);
}

.add-photo-card i {
    font-size: 3rem;
    color: var(--primary-color);
    margin-bottom: 10px;
}

#photo-input {
    display: none;
}

/* Sound Settings Section */
.sound-settings {
    background: rgba(108, 92, 231, 0.05);
    border-radius: 15px;
    padding: 25px;
    margin-bottom: 20px;
}

.sound-settings h3 {
    color: var(--primary-color);
    margin-bottom: 20px;
    font-size: 1.3rem;
    text-align: center;
}

.voice-selector {
    margin-bottom: 20px;
}

.voice-selector label {
    display: block;
    margin-bottom: 10px;
    font-weight: 600;
    color: var(--dark-color);
}

.voice-select {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--primary-color);
    border-radius: 15px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    background: white;
    margin-bottom: 10px;
}

.voice-option {
    padding: 8px;
    margin: 5px 0;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.voice-option:hover {
    background: rgba(108, 92, 231, 0.1);
}

.voice-option.selected {
    background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    color: white;
}

.voice-option.comentarista {
    border-left: 4px solid var(--accent-color);
    font-weight: 600;
}

.message-input {
    width: 100%;
    padding: 15px;
    border: 2px solid var(--primary-color);
    border-radius: 15px;
    font-family: 'Fredoka', sans-serif;
    font-size: 1rem;
    margin-bottom: 15px;
    min-height: 80px;
    resize: vertical;
}

.message-input:focus {
    outline: none;
    border-color: var(--secondary-color);
    box-shadow: 0 0 0 3px rgba(253, 121, 168, 0.2);
}

.save-sound-btn {
    background: linear-gradient(90deg, var(--success-color), #00b894);
    color: white;
    padding: 15px;
    font-size: 1.1rem;
    width: 100%;
}

.test-sound-btn {
    background: linear-gradient(90deg, var(--accent-color), #f39c12);
    color: white;
    padding: 12px;
    font-size: 1rem;
    margin-bottom: 15px;
    width: 100%;
}

.sound-preview {
    background: rgba(253, 203, 110, 0.1);
    border-radius: 10px;
    padding: 15px;
    margin-top: 15px;
    text-align: center;
    color: var(--dark-color);
}

/* AI Loading Animation */
.ai-loading {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255,255,255,.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        flex-direction: column;
    }
    
    #options {
        grid-template-columns: 1fr;
    }
    
    h1 {
        font-size: 2rem;
    }
    
    header p {
        font-size: 1rem;
    }
    
    .admin-btn, .sound-toggle {
        position: static;
        margin-top: 10px;
        display: block;
        width: 100%;
    }
    
    .options-input {
        grid-template-columns: 1fr;
    }
    
    .photos-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    }
    
    .elimination-photo, .winner-photo {
        width: 250px;
        height: 250px;
    }
    
    .elimination-name, .winner-name {
        font-size: 2.5rem;
    }
    
    .elimination-message {
        font-size: 1.8rem;
    }
    
    .winner-message {
        font-size: 2rem;
    }
    
    .countdown-number {
        font-size: 5rem;
    }
    
    #current-player {
        font-size: 1.5rem;
    }
}
</style>
</head>
<body>
<div class="bg-animation">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
</div>

<header>
    <h1><i class="fas fa-trophy"></i> Quiz Champions</h1>
    <p>¡Demuestra quién es el campeón del conocimiento!</p>
    <button class="sound-toggle" id="sound-toggle" onclick="toggleSound()">
        <i class="fas fa-volume-up"></i> <span id="sound-text">Sonido ON</span>
    </button>
    <button class="admin-btn" onclick="showLogin()"><i class="fas fa-user-shield"></i> Administrador</button>
</header>

<div class="container">
    <div class="left-panel">
        <div id="controls">
            <input type="text" id="new-player" placeholder="Nombre del jugador">
            <button id="add-player-btn" onclick="addPlayer()"><i class="fas fa-user-plus"></i> Agregar</button>
        </div>

        <div id="current-player" class="fade"></div>
        
        <!-- Countdown Container -->
        <div id="countdown-container" style="display: none;">
            <div class="countdown-number" id="countdown-number">2</div>
            <div class="countdown-text">¡Prepárate!</div>
            <div class="countdown-progress">
                <div class="countdown-progress-bar" id="countdown-progress"></div>
            </div>
        </div>

        <div id="question-text" class="fade" style="display: none;"></div>
        <div id="options" style="display: none;"></div>
        <div id="result" class="fade" style="display: none;"></div>
    </div>

    <div class="right-panel">
        <h3><i class="fas fa-users"></i> Jugadores</h3>
        <table id="players-table">
            <thead>
                <tr>
                    <th>Jugador</th>
                    <th>Vidas</th>
                    <th>Puntos</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody id="players-body"></tbody>
        </table>
    </div>
</div>

<!-- Sound Indicator -->
<div class="sound-indicator" id="sound-indicator">
    <div class="sound-wave"></div>
    <div class="sound-wave"></div>
    <div class="sound-wave"></div>
    <div class="sound-wave"></div>
    <span>Reproduciendo sonido...</span>
</div>

<!-- Elimination Animation -->
<div id="elimination-container">
    <div class="elimination-particles" id="particles"></div>
    <div class="elimination-content">
        <img id="elimination-photo" class="elimination-photo" src="https://picsum.photos/seed/default/400/400.jpg" alt="Player">
        <div id="elimination-name" class="elimination-name">JUGADOR</div>
        <div class="elimination-message" id="elimination-message">¡HAS SIDO ELIMINADO!</div>
        <div id="elimination-stats" class="elimination-stats">Respondiste 0 preguntas correctamente</div>
        <button class="continue-btn" onclick="closeElimination()">Continuar</button>
    </div>
</div>

<!-- Winner Animation -->
<div id="winner-container">
    <div class="winner-particles" id="winner-particles"></div>
    <div class="winner-content">
        <img id="winner-photo" class="winner-photo" src="https://picsum.photos/seed/winner/400/400.jpg" alt="Winner">
        <div id="winner-name" class="winner-name">GANADOR</div>
        <div class="winner-message" id="winner-message">¡WE ARE THE CHAMPIONS!</div>
        <div id="winner-stats" class="winner-stats">Eres el campeón con 0 puntos</div>
        <button class="play-again-btn" onclick="resetGame()"><i class="fas fa-redo"></i> Jugar de Nuevo</button>
    </div>
</div>

<!-- Login Modal -->
<div id="login-container">
    <div id="login-modal">
        <h2><i class="fas fa-lock"></i> Acceso Administrador</h2>
        <input type="text" id="username" class="login-input" placeholder="Usuario">
        <input type="password" id="password" class="login-input" placeholder="Contraseña">
        <button id="login-btn" onclick="login()"><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</button>
        <button id="cancel-login-btn" onclick="hideLogin()"><i class="fas fa-times"></i> Cancelar</button>
    </div>
</div>

<!-- Admin Panel -->
<div id="admin-container">
    <div id="admin-panel">
        <button id="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</button>
        <h2><i class="fas fa-cog"></i> Panel de Administración</h2>
        
        <div class="admin-tabs">
            <button class="tab-btn active" onclick="switchTab('add')"><i class="fas fa-plus-circle"></i> Agregar Pregunta</button>
            <button class="tab-btn" onclick="switchTab('view')"><i class="fas fa-list"></i> Ver Preguntas</button>
            <button class="tab-btn" onclick="switchTab('photos')"><i class="fas fa-camera"></i> Fotos Jugadores</button>
            <button class="tab-btn" onclick="switchTab('sounds')"><i class="fas fa-microphone"></i> Configuración de Sonido</button>
        </div>
        
        <div id="add-tab" class="tab-content active">
            <button id="ai-generate-btn" onclick="generateAIQuestion()">
                <i class="fas fa-robot"></i> <span id="ai-btn-text">Generar con IA</span>
            </button>
            
            <form class="question-form" onsubmit="saveQuestion(event)">
                <input type="text" id="new-question" class="form-input" placeholder="Escribe la pregunta..." required>
                
                <div class="options-input">
                    <input type="text" id="option1" class="form-input" placeholder="Opción 1" required>
                    <input type="text" id="option2" class="form-input" placeholder="Opción 2" required>
                    <input type="text" id="option3" class="form-input" placeholder="Opción 3" required>
                    <input type="text" id="option4" class="form-input" placeholder="Opción 4" required>
                </div>
                
                <select id="correct-answer" class="correct-select" required>
                    <option value="">Selecciona la respuesta correcta</option>
                    <option value="0">Opción 1</option>
                    <option value="1">Opción 2</option>
                    <option value="2">Opción 3</option>
                    <option value="3">Opción 4</option>
                </select>
                
                <button type="submit" id="save-question-btn"><i class="fas fa-save"></i> Guardar Pregunta</button>
            </form>
        </div>
        
        <div id="view-tab" class="tab-content">
            <div class="questions-list" id="questions-list">
                <!-- Las preguntas se cargarán aquí dinámicamente -->
            </div>
        </div>
        
        <div id="photos-tab" class="tab-content">
            <h3 style="text-align: center; margin-bottom: 20px; color: var(--primary-color);">
                <i class="fas fa-camera"></i> Gestión de Fotos de Jugadores
            </h3>
            <div class="photos-grid" id="photos-grid">
                <div class="add-photo-card" onclick="document.getElementById('photo-input').click()">
                    <i class="fas fa-plus-circle"></i>
                    <p>Agregar Foto</p>
                </div>
            </div>
            <input type="file" id="photo-input" accept="image/*" onchange="handlePhotoUpload(event)" style="display: none;">
        </div>
        
        <div id="sounds-tab" class="tab-content">
            <div class="sound-settings">
                <h3><i class="fas fa-microphone"></i> Configuración de Sonido</h3>
                
                <div class="voice-selector">
                    <label for="voice-select">Selecciona la voz para los anuncios:</label>
                    <select id="voice-select" class="voice-select" onchange="updateVoiceSelection()">
                        <option value="">Cargando voces...</option>
                    </select>
                </div>
                
                <div class="voice-selector">
                    <label>Mensaje de Eliminación (usa {nombre} para el jugador):</label>
                    <textarea id="elimination-message-input" class="message-input" placeholder="Ej: ¡Oh pobrecito! {nombre}, estás eliminado">¡Oh pobrecito! {nombre}, estás eliminado</textarea>
                    <button class="test-sound-btn" onclick="testEliminationSound()">
                        <i class="fas fa-play"></i> Probar Mensaje de Eliminación
                    </button>
                </div>
                
                <div class="voice-selector">
                    <label>Mensaje de Victoria (usa {nombre} para el jugador):</label>
                    <textarea id="victory-message-input" class="message-input" placeholder="Ej: ¡We are the champions! {nombre} eres el campeón">¡We are the champions! {nombre} eres el campeón</textarea>
                    <button class="test-sound-btn" onclick="testVictorySound()">
                        <i class="fas fa-play"></i> Probar Mensaje de Victoria
                    </button>
                </div>
                
                <div class="voice-selector">
                    <label>Mensaje de Respuesta Incorrecta:</label>
                    <textarea id="wrong-answer-input" class="message-input" placeholder="Ej: Respuesta incorrecta. La respuesta correcta era {respuesta}">Respuesta incorrecta. La respuesta correcta era {respuesta}</textarea>
                    <button class="test-sound-btn" onclick="testWrongAnswerSound()">
                        <i class="fas fa-play"></i> Probar Mensaje de Respuesta Incorrecta
                    </button>
                </div>
                
                <button class="save-sound-btn" onclick="saveSoundSettings()">
                    <i class="fas fa-save"></i> Guardar Configuración de Sonido
                </button>
                
                <div class="sound-preview" id="sound-preview">
                    <i class="fas fa-info-circle"></i> Los mensajes se guardarán y se usarán en el juego
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ====== CONFIGURACIÓN INICIAL ======
let players = [
    {name:"Jonathan", lives:3, correct:0},
    {name:"Angelino", lives:3, correct:0},
    {name:"Andres", lives:3, correct:0},
    {name:"Leo", lives:3, correct:0},
    {name:"Carlos", lives:3, correct:0},
    {name:"Ingrid", lives:3, correct:0},
    {name:"Angela", lives:3, correct:0},
    {name:"Ariana", lives:3, correct:0},
];

let currentPlayerIndex = 0;
let questionAnswered = false;
let isAdminLoggedIn = false;
let playerPhotos = JSON.parse(localStorage.getItem('playerPhotos')) || {};
let soundEnabled = true;
let currentQuestion = null;
let countdownInterval = null;

// Cargar configuración de sonido desde localStorage
let soundSettings = JSON.parse(localStorage.getItem('soundSettings')) || {
    selectedVoice: null,
    eliminationMessage: "¡Oh pobrecito! {nombre}, estás eliminado",
    victoryMessage: "¡We are the champions! {nombre} eres el campeón",
    wrongAnswerMessage: "Respuesta incorrecta. La respuesta correcta era {respuesta}"
};

// Cargar preguntas guardadas en localStorage
let questions = JSON.parse(localStorage.getItem('quizQuestions')) || [
    { q:"¿Cuál es la capital de Francia?", a:["Madrid","París","Roma","Berlín"], correct:1 },
    { q:"¿Quién escribió 'Cien años de soledad'?", a:["Gabriel García Márquez","Mario Vargas Llosa","Pablo Neruda","Julio Cortázar"], correct:0 },
    { q:"¿Cuál es el planeta más grande del sistema solar?", a:["Saturno","Júpiter","Marte","Neptuno"], correct:1 },
    { q:"¿En qué año llegó el hombre a la Luna?", a:["1965","1969","1972","1975"], correct:1 },
    { q:"¿Cuál es el elemento químico con símbolo 'O'?", a:["Oro","Oxígeno","Osmio","Ozono"], correct:1 },
    { q:"¿Qué idioma se habla en Brasil?", a:["Español","Portugués","Inglés","Francés"], correct:1 },
    { q:"¿Cuál es el océano más grande?", a:["Atlántico","Pacífico","Índico","Ártico"], correct:1 },
    { q:"¿Qué país tiene forma de bota?", a:["Grecia","Italia","España","Portugal"], correct:1 },
    { q:"¿Quién pintó la Mona Lisa?", a:["Picasso","Leonardo da Vinci","Van Gogh","Rembrandt"], correct:1 },
    { q:"¿Cuál es el animal más rápido del mundo?", a:["León","Tigre","Guepardo","Águila"], correct:2 },
    { q:"¿Qué gas respiramos principalmente?", a:["Nitrógeno","Oxígeno","Dióxido de carbono","Hidrógeno"], correct:1 },
    { q:"¿Cuál es la moneda de Japón?", a:["Yuan","Yen","Dólar","Won"], correct:1 },
    { q:"¿Qué continente tiene más países?", a:["África","Asia","Europa","América"], correct:0 },
    { q:"¿Quién descubrió América?", a:["Cristóbal Colón","Leif Erikson","Magallanes","Américo Vespucio"], correct:0 },
    { q:"¿Cuál es la velocidad de la luz?", a:["300.000 km/s","150.000 km/s","1.000 km/s","30.000 km/s"], correct:0 },
    { q:"¿Qué instrumento mide la temperatura?", a:["Barómetro","Termómetro","Higrómetro","Sismógrafo"], correct:1 },
    { q:"¿Qué año comenzó la Segunda Guerra Mundial?", a:["1939","1941","1935","1945"], correct:0 },
    { q:"¿Quién es el autor de 'Hamlet'?", a:["Shakespeare","Dante","Goethe","Tolstói"], correct:0 },
    { q:"¿Cuál es el río más largo del mundo?", a:["Amazonas","Nilo","Misisipi","Yangtsé"], correct:0 },
    { q:"¿Qué país ganó la Copa del Mundo 2018?", a:["Brasil","Alemania","Francia","Argentina"], correct:2 }
];

// ====== FUNCIONES DE SONIDO ======
function toggleSound() {
    soundEnabled = !soundEnabled;
    const soundToggle = document.getElementById('sound-toggle');
    const soundText = document.getElementById('sound-text');
    const icon = soundToggle.querySelector('i');
    
    if (soundEnabled) {
        soundToggle.classList.remove('muted');
        soundText.textContent = 'Sonido ON';
        icon.className = 'fas fa-volume-up';
    } else {
        soundToggle.classList.add('muted');
        soundText.textContent = 'Sonido OFF';
        icon.className = 'fas fa-volume-mute';
    }
}

function showSoundIndicator() {
    if (!soundEnabled) return;
    
    const indicator = document.getElementById('sound-indicator');
    indicator.style.display = 'flex';
    
    setTimeout(() => {
        indicator.style.display = 'none';
    }, 2000);
}

function speak(text) {
    if (!soundEnabled) return;
    
    showSoundIndicator();
    
    // Cancelar cualquier speech anterior
    window.speechSynthesis.cancel();
    
    const utterance = new SpeechSynthesisUtterance();
    utterance.text = text;
    utterance.lang = 'es-ES';
    utterance.rate = 0.9;
    utterance.pitch = 1.0;
    utterance.volume = 1.0;
    
    // Usar voz seleccionada si está disponible
    if (soundSettings.selectedVoice) {
        const voices = window.speechSynthesis.getVoices();
        const selectedVoice = voices.find(voice => voice.name === soundSettings.selectedVoice);
        if (selectedVoice) {
            utterance.voice = selectedVoice;
        }
    } else {
        // Seleccionar voz española por defecto
        const voices = window.speechSynthesis.getVoices();
        const spanishVoice = voices.find(voice => voice.lang.includes('es'));
        if (spanishVoice) {
            utterance.voice = spanishVoice;
        }
    }
    
    window.speechSynthesis.speak(utterance);
}

function speakElimination(playerName) {
    const message = soundSettings.eliminationMessage.replace('{nombre}', playerName);
    speak(message);
}

function speakVictory(playerName) {
    const message = soundSettings.victoryMessage.replace('{nombre}', playerName);
    speak(message);
}

function speakWrongAnswer(correctAnswer) {
    const message = soundSettings.wrongAnswerMessage.replace('{respuesta}', correctAnswer);
    speak(message);
}

// Cargar voces cuando estén disponibles
window.speechSynthesis.onvoiceschanged = function() {
    loadVoices();
};

// ====== BANCO DE DATOS PARA IA ======
const aiQuestionBank = {
    geography: [
        {
            question: "¿Cuál es el país más grande del mundo por superficie?",
            correct: "Rusia",
            incorrect: ["Canadá", "China", "Estados Unidos"]
        },
        {
            question: "¿Cuál es el desierto más caliente del mundo?",
            correct: "Sahara",
            incorrect: ["Gobi", "Atacama", "Arábigo"]
        },
        {
            question: "¿En qué continente se encuentra Egipto?",
            correct: "África",
            incorrect: ["Asia", "Europa", "América"]
        },
        {
            question: "¿Cuál es la montaña más alta del mundo?",
            correct: "Everest",
            incorrect: ["K2", "Kangchenjunga", "Lhotse"]
        },
        {
            question: "¿Cuál es el río más largo de Sudamérica?",
            correct: "Amazonas",
            incorrect: ["Orinoco", "Paraná", "Magdalena"]
        }
    ],
    history: [
        {
            question: "¿En qué año cayó el Imperio Romano?",
            correct: "476 d.C.",
            incorrect: ["106 d.C.", "313 d.C.", "79 d.C."]
        },
        {
            question: "¿Quién fue el primer presidente de Estados Unidos?",
            correct: "George Washington",
            incorrect: ["Thomas Jefferson", "Benjamin Franklin", "Abraham Lincoln"]
        },
        {
            question: "¿Cuándo terminó la Primera Guerra Mundial?",
            correct: "1918",
            incorrect: ["1914", "1916", "1920"]
        },
        {
            question: "¿Qué civilización construyó Machu Picchu?",
            correct: "Inca",
            incorrect: ["Azteca", "Maya", "Olmeca"]
        },
        {
            question: "¿Quién inventó la lámpara incandescente?",
            correct: "Thomas Edison",
            incorrect: ["Nikola Tesla", "Alexander Graham Bell", "Benjamin Franklin"]
        }
    ],
    science: [
        {
            question: "¿Cuántos huesos tiene el cuerpo humano adulto?",
            correct: "206",
            incorrect: ["208", "204", "210"]
        },
        {
            question: "¿Cuál es el componente principal del aire?",
            correct: "Nitrógeno",
            incorrect: ["Oxígeno", "Dióxido de carbono", "Argón"]
        },
        {
            question: "¿Cuántos planetas hay en el sistema solar?",
            correct: "8",
            incorrect: ["7", "9", "10"]
        },
        {
            question: "¿Qué órgano del cuerpo humano produce insulina?",
            correct: "Páncreas",
            incorrect: ["Hígado", "Riñón", "Corazón"]
        },
        {
            question: "¿Cuál es la fórmula química del agua?",
            correct: "H2O",
            incorrect: ["CO2", "O2", "H2O2"]
        }
    ],
    sports: [
        {
            question: "¿Cuántos jugadores tiene un equipo de fútbol en campo?",
            correct: "11",
            incorrect: ["9", "10", "12"]
        },
        {
            question: "¿En qué deporte se usa una red de 3.05 metros de altura?",
            correct: "Baloncesto",
            incorrect: ["Voleibol", "Tenis", "Bádminton"]
        },
        {
            question: "¿Cada cuántos años se celebran los Juegos Olímpicos?",
            correct: "4 años",
            incorrect: ["2 años", "3 años", "5 años"]
        },
        {
            question: "¿Qué país ha ganado más Copas del Mundo de fútbol?",
            correct: "Brasil",
            incorrect: ["Alemania", "Argentina", "Italia"]
        },
        {
            question: "¿En qué deporte se compite en el Tour de Francia?",
            correct: "Ciclismo",
            incorrect: ["Atletismo", "Natación", "Automovilismo"]
        }
    ],
    technology: [
        {
            question: "¿Quién fundó Microsoft?",
            correct: "Bill Gates",
            incorrect: ["Steve Jobs", "Mark Zuckerberg", "Larry Page"]
        },
        {
            question: "¿En qué año se creó Facebook?",
            correct: "2004",
            incorrect: ["2002", "2005", "2006"]
        },
        {
            question: "¿Qué significa 'WWW' en informática?",
            correct: "World Wide Web",
            incorrect: ["World Wide Wait", "Web World Wide", "World Web Wide"]
        },
        {
            question: "¿Cuál fue el primer smartphone de Apple?",
            correct: "iPhone",
            incorrect: ["iPod", "iPad", "iMac"]
        },
        {
            question: "¿Qué lenguaje de programación es conocido como 'el lenguaje de la web'?",
            correct: "JavaScript",
            incorrect: ["Python", "Java", "C++"]
        }
    ],
    culture: [
        {
            question: "¿Quién pintó 'Las Meninas'?",
            correct: "Diego Velázquez",
            incorrect: ["Pablo Picasso", "Francisco Goya", "Salvador Dalí"]
        },
        {
            question: "¿Cuántas cuerdas tiene una guitarra estándar?",
            correct: "6",
            incorrect: ["4", "5", "7"]
        },
        {
            question: "¿Quién dirigió 'Titanic'?",
            correct: "James Cameron",
            incorrect: ["Steven Spielberg", "Martin Scorsese", "Quentin Tarantino"]
        },
        {
            question: "¿En qué año se publicó 'Don Quijote de la Mancha'?",
            correct: "1605",
            incorrect: ["1595", "1615", "1585"]
        },
        {
            question: "¿Cuál es el instrumento musical más vendido del mundo?",
            correct: "Guitarra",
            incorrect: ["Piano", "Violín", "Batería"]
        }
    ]
};

// ====== FUNCIONES DE JUEGO ======
function renderPlayers(){
    const tbody = document.getElementById("players-body");
    tbody.innerHTML="";
    players.forEach((p,i)=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${p.name}</td>
            <td class="life ${p.lives<3?'lost':''}">${"❤️".repeat(p.lives)}</td>
            <td>${p.correct}</td>
            <td><button class="remove-btn" onclick="removePlayer(${i})"><i class="fas fa-trash"></i></button></td>
        `;
        tbody.appendChild(tr);
    });
}

function addPlayer(){
    const input = document.getElementById("new-player");
    const name = input.value.trim();
    if(name){
        players.push({name:name, lives:3, correct:0});
        input.value="";
        renderPlayers();
        if(players.length === 1) {
            showPlayerTurn();
        }
    }
}

function removePlayer(i){
    players.splice(i,1);
    if(currentPlayerIndex >= players.length) currentPlayerIndex=0;
    renderPlayers();
    if(players.length === 0) {
        document.getElementById("current-player").textContent = "";
        document.getElementById("question-text").textContent = "";
        document.getElementById("options").innerHTML = "";
        document.getElementById("result").textContent = "";
    }
}

function showPlayerTurn() {
    if(players.length===0){
        return;
    }
    const player = players[currentPlayerIndex];
    
    // Limpiar cualquier countdown anterior
    if (countdownInterval) {
        clearInterval(countdownInterval);
    }
    
    // Ocultar elementos del juego
    document.getElementById("question-text").style.display = "none";
    document.getElementById("options").style.display = "none";
    document.getElementById("result").style.display = "none";
    
    // Mostrar turno del jugador
    const currentPlayerEl = document.getElementById("current-player");
    currentPlayerEl.textContent = `Turno de: ${player.name}`;
    currentPlayerEl.style.display = "flex";
    currentPlayerEl.className = "fade";
    
    // Iniciar countdown después de 1 segundo
    setTimeout(() => {
        startCountdown();
    }, 1000);
}

function startCountdown() {
    const countdownContainer = document.getElementById("countdown-container");
    const countdownNumber = document.getElementById("countdown-number");
    const progressBar = document.getElementById("countdown-progress");
    
    // Mostrar container de countdown
    countdownContainer.style.display = "flex";
    
    let countdown = 2;
    countdownNumber.textContent = countdown;
    
    // Reiniciar animación de la barra de progreso
    progressBar.style.animation = 'none';
    setTimeout(() => {
        progressBar.style.animation = 'progressShrink 2s linear';
    }, 10);
    
    countdownInterval = setInterval(() => {
        countdown--;
        
        if (countdown > 0) {
            countdownNumber.textContent = countdown;
            countdownNumber.style.animation = 'none';
            setTimeout(() => {
                countdownNumber.style.animation = 'countdownPulse 1s ease-in-out';
            }, 10);
        } else {
            clearInterval(countdownInterval);
            countdownContainer.style.display = "none";
            showQuestion();
        }
    }, 1000);
}

function showQuestion(){
    if(players.length===0){
        return;
    }
    
    // Ocultar countdown
    document.getElementById("countdown-container").style.display = "none";
    
    // Elegir pregunta aleatoria
    const questionIndex = Math.floor(Math.random()*questions.length);
    currentQuestion = questions[questionIndex];
    
    // Mostrar pregunta
    document.getElementById("question-text").textContent = `${currentQuestion.q}`;
    document.getElementById("question-text").style.display = "block";
    
    const optionsDiv = document.getElementById("options");
    optionsDiv.innerHTML = "";
    optionsDiv.style.display = "grid";
    questionAnswered = false;
    
    currentQuestion.a.forEach((opt,i)=>{
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.className="option fade";
        btn.onclick = () => {
            if (!questionAnswered) {
                checkAnswer(i, currentQuestion.correct);
                questionAnswered = true;
            }
        };
        optionsDiv.appendChild(btn);
    });
    
    document.getElementById("result").textContent = "";
    document.getElementById("result").style.display = "flex";
    document.getElementById("result").className = "fade";
}

function checkAnswer(selected, correct){
    const player = players[currentPlayerIndex];
    const resultEl = document.getElementById("result");
    const options = document.querySelectorAll(".option");
    
    if(selected===correct){
        player.correct++;
        resultEl.textContent=`¡Correcto! +1 punto`;
        resultEl.className = "fade correct";
        options[selected].classList.add("correct");
    } else {
        player.lives--;
        resultEl.textContent=`Incorrecto. Te quedan ${player.lives} vidas`;
        resultEl.className = "fade incorrect";
        options[selected].classList.add("incorrect");
        options[correct].classList.add("correct");
        
        // Reproducir sonido de respuesta incorrecta
        speakWrongAnswer(currentQuestion.a[correct]);
        
        if(player.lives===0){
            showEliminationAnimation(player);
            return;
        }
    }
    
    renderPlayers();
    
    // Esperar 3 segundos y luego pasar al siguiente turno automáticamente
    setTimeout(() => {
        nextTurn();
    }, 3000);
}

function showEliminationAnimation(player) {
    const container = document.getElementById("elimination-container");
    const photo = document.getElementById("elimination-photo");
    const name = document.getElementById("elimination-name");
    const message = document.getElementById("elimination-message");
    const stats = document.getElementById("elimination-stats");
    
    // Configurar datos del jugador eliminado
    name.textContent = player.name.toUpperCase();
    message.textContent = soundSettings.eliminationMessage.replace('{nombre}', player.name).toUpperCase();
    stats.textContent = `Respondiste ${player.correct} preguntas correctamente`;
    
    // Usar foto del jugador si existe, sino usar imagen por defecto
    if (playerPhotos[player.name]) {
        photo.src = playerPhotos[player.name];
    } else {
        photo.src = `https://picsum.photos/seed/${player.name}/400/400.jpg`;
    }
    
    // Crear partículas animadas
    createParticles();
    
    // Mostrar animación
    container.style.display = "flex";
    
    // Reproducir sonido de eliminación
    speakElimination(player.name);
    
    // Reproducir sonido de eliminación (simulado con vibración si está disponible)
    if (navigator.vibrate) {
        navigator.vibrate([200, 100, 200]);
    }
}

function createParticles() {
    const particlesContainer = document.getElementById("particles");
    particlesContainer.innerHTML = "";
    
    for (let i = 0; i < 50; i++) {
        const particle = document.createElement("div");
        particle.className = "particle";
        particle.style.left = Math.random() * 100 + "%";
        particle.style.animationDelay = Math.random() * 3 + "s";
        particle.style.backgroundColor = ['#ff7675', '#fd79a8', '#fdcb6e', '#6c5ce7'][Math.floor(Math.random() * 4)];
        particlesContainer.appendChild(particle);
    }
}

function createWinnerParticles() {
    const particlesContainer = document.getElementById("winner-particles");
    particlesContainer.innerHTML = "";
    
    for (let i = 0; i < 100; i++) {
        const particle = document.createElement("div");
        particle.className = "winner-particle";
        particle.style.left = Math.random() * 100 + "%";
        particle.style.animationDelay = Math.random() * 3 + "s";
        particle.style.backgroundColor = ['#6c5ce7', '#fd79a8', '#fdcb6e', '#55efc4', '#ff7675'][Math.floor(Math.random() * 5)];
        particlesContainer.appendChild(particle);
    }
}

function closeElimination() {
    document.getElementById("elimination-container").style.display = "none";
    nextTurn();
}

function nextTurn(){
    const activePlayers = players.filter(p=>p.lives>0);
    if(activePlayers.length===1){
        showWinnerAnimation(activePlayers[0]);
        return;
    }

    do{
        currentPlayerIndex = (currentPlayerIndex+1) % players.length;
    } while(players[currentPlayerIndex].lives===0);
    showPlayerTurn();
}

function showWinnerAnimation(player) {
    const container = document.getElementById("winner-container");
    const photo = document.getElementById("winner-photo");
    const name = document.getElementById("winner-name");
    const message = document.getElementById("winner-message");
    const stats = document.getElementById("winner-stats");
    
    // Configurar datos del ganador
    name.textContent = player.name.toUpperCase();
    message.textContent = soundSettings.victoryMessage.replace('{nombre}', player.name).toUpperCase();
    stats.textContent = `Eres el campeón con ${player.correct} puntos`;
    
    // Usar foto del jugador si existe, sino usar imagen por defecto
    if (playerPhotos[player.name]) {
        photo.src = playerPhotos[player.name];
    } else {
        photo.src = `https://picsum.photos/seed/${player.name}/400/400.jpg`;
    }
    
    // Crear partículas animadas
    createWinnerParticles();
    
    // Mostrar animación
    container.style.display = "flex";
    
    // Reproducir sonido de victoria
    speakVictory(player.name);
    
    // Vibración de celebración
    if (navigator.vibrate) {
        navigator.vibrate([100, 50, 100, 50, 100, 50, 200]);
    }
}

function createConfetti() {
    const confetti = document.createElement('div');
    confetti.className = 'confetti';
    confetti.style.left = Math.random() * 100 + '%';
    confetti.style.backgroundColor = ['#6c5ce7', '#fd79a8', '#fdcb6e', '#55efc4', '#ff7675'][Math.floor(Math.random() * 5)];
    confetti.style.animationDelay = Math.random() * 3 + 's';
    confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
    document.getElementById('winner-container').appendChild(confetti);
    
    setTimeout(() => {
        confetti.remove();
    }, 5000);
}

function resetGame() {
    players.forEach(p => {
        p.lives = 3;
        p.correct = 0;
    });
    currentPlayerIndex = 0;
    document.getElementById("winner-container").style.display = "none";
    renderPlayers();
    showPlayerTurn();
}

// ====== FUNCIONES DE LOGIN ======
function showLogin() {
    document.getElementById("login-container").style.display = "flex";
}

function hideLogin() {
    document.getElementById("login-container").style.display = "none";
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
}

function login() {
    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    
    if(username === "admin" && password === "clavito01") {
        isAdminLoggedIn = true;
        hideLogin();
        showAdminPanel();
    } else {
        alert("Usuario o contraseña incorrectos");
    }
}

function logout() {
    isAdminLoggedIn = false;
    document.getElementById("admin-container").style.display = "none";
}

function showAdminPanel() {
    document.getElementById("admin-container").style.display = "block";
    loadQuestionsList();
    loadPlayerPhotos();
    loadSoundSettings();
}

// ====== FUNCIONES DE ADMINISTRACIÓN ======
function switchTab(tab) {
    // Ocultar todos los tabs
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Mostrar el tab seleccionado
    if(tab === 'add') {
        document.getElementById('add-tab').classList.add('active');
        document.querySelectorAll('.tab-btn')[0].classList.add('active');
    } else if(tab === 'view') {
        document.getElementById('view-tab').classList.add('active');
        document.querySelectorAll('.tab-btn')[1].classList.add('active');
        loadQuestionsList();
    } else if(tab === 'photos') {
        document.getElementById('photos-tab').classList.add('active');
        document.querySelectorAll('.tab-btn')[2].classList.add('active');
        loadPlayerPhotos();
    } else if(tab === 'sounds') {
        document.getElementById('sounds-tab').classList.add('active');
        document.querySelectorAll('.tab-btn')[3].classList.add('active');
        loadSoundSettings();
    }
}

function loadSoundSettings() {
    document.getElementById('elimination-message-input').value = soundSettings.eliminationMessage;
    document.getElementById('victory-message-input').value = soundSettings.victoryMessage;
    document.getElementById('wrong-answer-input').value = soundSettings.wrongAnswerMessage;
    
    // Cargar voces
    loadVoices();
}

function generateAIQuestion() {
    const btn = document.getElementById('ai-generate-btn');
    const btnText = document.getElementById('ai-btn-text');
    
    // Mostrar animación de carga
    btn.classList.add('ai-generating');
    btnText.innerHTML = '<span class="ai-loading"></span> Generando pregunta...';
    
    // Simular tiempo de procesamiento de IA
    setTimeout(() => {
        // Seleccionar categoría aleatoria
        const categories = Object.keys(aiQuestionBank);
        const randomCategory = categories[Math.floor(Math.random() * categories.length)];
        const categoryQuestions = aiQuestionBank[randomCategory];
        
        // Seleccionar pregunta aleatoria de la categoría
        const randomQuestion = categoryQuestions[Math.floor(Math.random() * categoryQuestions.length)];
        
        // Preparar todas las opciones
        const allOptions = [randomQuestion.correct, ...randomQuestion.incorrect];
        
        // Mezclar opciones
        for (let i = allOptions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [allOptions[i], allOptions[j]] = [allOptions[j], allOptions[i]];
        }
        
        // Encontrar el índice de la respuesta correcta
        const correctIndex = allOptions.indexOf(randomQuestion.correct);
        
        // Llenar el formulario
        document.getElementById('new-question').value = randomQuestion.question;
        document.getElementById('option1').value = allOptions[0];
        document.getElementById('option2').value = allOptions[1];
        document.getElementById('option3').value = allOptions[2];
        document.getElementById('option4').value = allOptions[3];
        document.getElementById('correct-answer').value = correctIndex.toString();
        
        // Restaurar botón
        btn.classList.remove('ai-generating');
        btnText.innerHTML = '<i class="fas fa-robot"></i> Generar con IA';
        
        // Mostrar notificación
        showNotification('¡Pregunta generada exitosamente!', 'success');
    }, 1500);
}

function showNotification(message, type) {
    // Crear elemento de notificación
    const notification = document.createElement('div');
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 25px;
        background: ${type === 'success' ? 'linear-gradient(90deg, #55efc4, #00b894)' : 'linear-gradient(90deg, #ff7675, #d63031)'};
        color: white;
        border-radius: 15px;
        font-family: 'Fredoka', sans-serif;
        font-weight: 600;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        z-index: 9999;
        animation: slideIn 0.3s ease-out;
    `;
    notification.textContent = message;
    
    // Agregar al DOM
    document.body.appendChild(notification);
    
    // Eliminar después de 3 segundos
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}

function saveQuestion(event) {
    event.preventDefault();
    
    const question = document.getElementById("new-question").value;
    const option1 = document.getElementById("option1").value;
    const option2 = document.getElementById("option2").value;
    const option3 = document.getElementById("option3").value;
    const option4 = document.getElementById("option4").value;
    const correct = parseInt(document.getElementById("correct-answer").value);
    
    const newQuestion = {
        q: question,
        a: [option1, option2, option3, option4],
        correct: correct
    };
    
    questions.push(newQuestion);
    localStorage.setItem('quizQuestions', JSON.stringify(questions));
    
    // Limpiar formulario
    document.getElementById("new-question").value = "";
    document.getElementById("option1").value = "";
    document.getElementById("option2").value = "";
    document.getElementById("option3").value = "";
    document.getElementById("option4").value = "";
    document.getElementById("correct-answer").value = "";
    
    showNotification("Pregunta guardada exitosamente", 'success');
    
    // Cambiar a la vista de preguntas
    switchTab('view');
}

function loadQuestionsList() {
    const questionsList = document.getElementById("questions-list");
    questionsList.innerHTML = "";
    
    questions.forEach((q, index) => {
        const questionItem = document.createElement("div");
        questionItem.className = "question-item";
        
        let optionsHTML = "";
        q.a.forEach((option, i) => {
            const isCorrect = i === q.correct ? "correct" : "";
            optionsHTML += `<p class="${isCorrect}">${option}</p>`;
        });
        
        questionItem.innerHTML = `
            <h4>${index + 1}. ${q.q}</h4>
            ${optionsHTML}
            <button class="delete-question-btn" onclick="deleteQuestion(${index})"><i class="fas fa-trash"></i> Eliminar</button>
        `;
        
        questionsList.appendChild(questionItem);
    });
}

function deleteQuestion(index) {
    if(confirm("¿Estás seguro de que quieres eliminar esta pregunta?")) {
        questions.splice(index, 1);
        localStorage.setItem('quizQuestions', JSON.stringify(questions));
        loadQuestionsList();
        showNotification("Pregunta eliminada exitosamente", 'success');
    }
}

// ====== FUNCIONES DE FOTOS DE JUGADORES ======
function handlePhotoUpload(event) {
    const file = event.target.files[0];
    if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
            // Crear modal para ingresar nombre del jugador
            const playerName = prompt("Ingresa el nombre del jugador para esta foto:");
            if (playerName) {
                // Guardar foto en localStorage
                playerPhotos[playerName] = e.target.result;
                localStorage.setItem('playerPhotos', JSON.stringify(playerPhotos));
                
                // Recargar grid de fotos
                loadPlayerPhotos();
                showNotification(`Foto agregada para ${playerName}`, 'success');
            }
        };
        reader.readAsDataURL(file);
    }
}

function loadPlayerPhotos() {
    const photosGrid = document.getElementById("photos-grid");
    
    // Limpiar grid excepto el botón de agregar
    const addButton = photosGrid.querySelector('.add-photo-card');
    photosGrid.innerHTML = '';
    
    // Agregar tarjetas de fotos existentes
    Object.entries(playerPhotos).forEach(([name, photoUrl]) => {
        const photoCard = document.createElement("div");
        photoCard.className = "photo-card";
        photoCard.innerHTML = `
            <img src="${photoUrl}" alt="${name}" class="photo-preview">
            <input type="text" class="player-name-input" value="${name}" onchange="updatePlayerName('${name}', this.value)">
            <button class="delete-photo-btn" onclick="deletePlayerPhoto('${name}')">
                <i class="fas fa-trash"></i> Eliminar
            </button>
        `;
        photosGrid.appendChild(photoCard);
    });
    
    // Agregar botón de agregar nueva foto
    photosGrid.appendChild(addButton);
}

function updatePlayerName(oldName, newName) {
    if (newName && newName !== oldName) {
        const photoUrl = playerPhotos[oldName];
        delete playerPhotos[oldName];
        playerPhotos[newName] = photoUrl;
        localStorage.setItem('playerPhotos', JSON.stringify(playerPhotos));
        loadPlayerPhotos();
        showNotification("Nombre actualizado", 'success');
    }
}

function deletePlayerPhoto(name) {
    if (confirm(`¿Estás seguro de que quieres eliminar la foto de ${name}?`)) {
        delete playerPhotos[name];
        localStorage.setItem('playerPhotos', JSON.stringify(playerPhotos));
        loadPlayerPhotos();
        showNotification("Foto eliminada", 'success');
    }
}

// Permitir login con Enter
document.getElementById("password").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        login();
    }
});

// Agregar animaciones CSS para notificaciones
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOut {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
`;
document.head.appendChild(style);

// ====== FUNCIONES DE SONIDO (ADICIONALES) ======
function loadVoices() {
    const voices = window.speechSynthesis.getVoices();
    const voiceSelect = document.getElementById('voice-select');
    
    if (voiceSelect) {
        voiceSelect.innerHTML = '';
        
        // Agrupar voces por idioma
        const spanishVoices = voices.filter(voice => voice.lang.includes('es'));
        const englishVoices = voices.filter(voice => voice.lang.includes('en'));
        const otherVoices = voices.filter(voice => !voice.lang.includes('es') && !voice.lang.includes('en'));
        
        // Añadir voces españolas
        if (spanishVoices.length > 0) {
            const spanishGroup = document.createElement('optgroup');
            spanishGroup.label = '🇪🇸 Voces en Español';
            
            spanishVoices.forEach(voice => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = `${voice.name} (${voice.lang})`;
                if (voice.name.includes('comentarista') || voice.name.includes('announcer')) {
                    option.textContent += ' 🎤';
                }
                spanishGroup.appendChild(option);
            });
            
            voiceSelect.appendChild(spanishGroup);
        }
        
        // Añadir voces en inglés
        if (englishVoices.length > 0) {
            const englishGroup = document.createElement('optgroup');
            englishGroup.label = '🇬🇧🇺🇸 English Voices';
            
            englishVoices.forEach(voice => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = `${voice.name} (${voice.lang})`;
                if (voice.name.includes('comentarista') || voice.name.includes('announcer')) {
                    option.textContent += ' 🎤';
                }
                englishGroup.appendChild(option);
            });
            
            voiceSelect.appendChild(englishGroup);
        }
        
        // Añadir otras voces
        if (otherVoices.length > 0) {
            const otherGroup = document.createElement('optgroup');
            otherGroup.label = '🌍 Otras Voces';
            
            otherVoices.forEach(voice => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = `${voice.name} (${voice.lang})`;
                otherGroup.appendChild(option);
            });
            
            voiceSelect.appendChild(otherGroup);
        }
        
        // Seleccionar voz guardada
        if (soundSettings.selectedVoice) {
            voiceSelect.value = soundSettings.selectedVoice;
        }
    }
}

function updateVoiceSelection() {
    const voiceSelect = document.getElementById('voice-select');
    soundSettings.selectedVoice = voiceSelect.value;
}

function saveSoundSettings() {
    soundSettings.eliminationMessage = document.getElementById('elimination-message-input').value;
    soundSettings.victoryMessage = document.getElementById('victory-message-input').value;
    soundSettings.wrongAnswerMessage = document.getElementById('wrong-answer-input').value;
    
    localStorage.setItem('soundSettings', JSON.stringify(soundSettings));
    
    showNotification('Configuración de sonido guardada exitosamente', 'success');
}

function testEliminationSound() {
    const playerName = "Jugador de Prueba";
    const message = document.getElementById('elimination-message-input').value.replace('{nombre}', playerName);
    speak(message);
}

function testVictorySound() {
    const playerName = "Jugador de Prueba";
    const message = document.getElementById('victory-message-input').value.replace('{nombre}', playerName);
    speak(message);
}

function testWrongAnswerSound() {
    const correctAnswer = "Respuesta Correcta";
    const message = document.getElementById('wrong-answer-input').value.replace('{respuesta}', correctAnswer);
    speak(message);
}

// ====== INICIO ======
renderPlayers();
showPlayerTurn();
</script>
</body>
</html>
